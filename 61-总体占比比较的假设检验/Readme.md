# 1. 问题描述
## 1.1 原始分布情况定义
对于一个总统候选人，想研究男性和女性给该候选人投票的情况是否存在差异。

男性投票的情况服从伯努利分布，定义随机变量X，假设投票对应随机变量X的取值为1，未投票对应的随机变量X取值为0，投票的概率为p1，  
则有 E(X) = p1，VAR(X) = p1 * (1-p1);

女性投票的情况服也从伯努利分布，定义随机变量Y，假设投票对应随机变量X的取值为1，未投票对应的随机变量X取值为0，投票的概率为p2，    
则有 E(Y) = p2，VAR(Y) = p1 * (1-p2);


## 1.2 采样结果
现在分别抽取了1000个男性样本和1000个女性样本，男性样本中有642人投票给了上述候选人，女性样本中有591人投票给了上述候选人；  

进行假设检验，判断男性投票和女性投票是否存在差异，置信水平为5%

# 2. 程序实现
```
############################################################
# 样本信息：
############################################################
sample_nums = 1000
pos_1 = 642
pos_2 = 591

############################################################
# 计算样本均值
############################################################
p1_sample_sample = pos_1 / sample_nums
p2_sample_sample = pos_2 / sample_nums

############################################################
# 假设检验：置信水平为5%
############################################################
# 原假设：男性和女性的投票情况没有差异，即 p1 - p2 = 0
# 备择假设：男性和女性的投票情况有差异，即 p1 - p2 ≠ 0
# 计算均值之差的抽样分布的均值
dif_p = p1_sample_sample - p2_sample_sample
# 在原假设成立的情况下：用抽样分布样本的方差作为抽样分布总体方差的无偏估计
p_sample_sample = (pos_1 + pos_2) / (sample_nums * 2)
var_sample_sample = p_sample_sample * (1 - p_sample_sample) / 1000
dif_var = var_sample_sample * 2
dif_std = dif_var ** 0.5

# 计算Z分数
z_score = (dif_p - 0) / dif_std
# 计算得到Z分数为2.34，根据显著性水平和双侧检验，查询Z表可得，临界Z值为1.96
# 1.96 < 2.34，所以拒绝原假设
```
